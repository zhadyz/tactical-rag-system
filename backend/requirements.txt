# FastAPI and server
fastapi==0.115.0
uvicorn[standard]==0.32.0
gunicorn==23.0.0
python-multipart==0.0.12
werkzeug>=3.0.0

# Security and rate limiting
slowapi>=0.1.9

# Pydantic v2
pydantic>=2.7.4,<3
pydantic-settings>=2.0.0

# ============================================================
# RAG System Dependencies
# ============================================================

# Core LangChain ecosystem
langchain==0.3.27
langchain-core==0.3.76
langchain-community==0.3.30
langchain-ollama==0.3.10
langchain-text-splitters==0.3.11

# Ollama Python SDK
ollama==0.6.0

# llama.cpp for direct GPU inference (8-10x faster than Ollama HTTP)
llama-cpp-python==0.3.2

# Document Processing
pypdf>=3.17.0
docx2txt>=0.8
python-docx>=1.1.0
unstructured>=0.11.0
markdown>=3.5.0

# OCR Dependencies
pdf2image>=1.16.0
pytesseract>=0.3.10
Pillow>=10.1.0

# Vector Stores - BOTH ChromaDB and Qdrant for migration support
chromadb>=0.4.22
langchain-chroma
qdrant-client>=1.12.0  # NEW: Qdrant client with hybrid search support
fastembed>=0.3.0  # NEW: Fast embeddings for Qdrant (optional, better perf)

# Utilities
numpy>=1.26.0
PyYAML>=6.0  # NEW: Configuration file parsing for config.yml

# Redis caching - ATLAS Protocol L4 Embedding Cache
redis[hiredis]>=5.0.0  # Async Redis with hiredis C parser for performance

# Advanced RAG features
rank-bm25>=0.2.2
sentence-transformers>=3.0.0
scikit-learn>=1.3.0

# PyTorch for SOTA reranker and embeddings
torch>=2.1.0
transformers>=4.35.0

# Production logging
python-json-logger>=2.0.7
psutil>=5.9.0  # System metrics monitoring

# Async file I/O (for Phase 1 security fixes)
aiofiles>=23.1.0

# Testing dependencies (development only)
pytest>=8.0.0
pytest-asyncio>=0.23.0
pytest-cov>=4.1.0
